<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="popup.css">
    <link rel="stylesheet" href="compare-modal.css">
</head>

<body>
    <div class="popup-container">
        <!-- Disabled State Overlay -->
        <div id="disabled-state" class="disabled-overlay" style="display: none;">
            <div class="disabled-content">
                <div class="disabled-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#ef5350" stroke-width="1.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>
                    </svg>
                </div>
                <h3>Grabbit is Disabled</h3>
                <p>This domain is in your blocklist.</p>
                <button id="enable-site-btn" class="action-button small">Enable for this site</button>
            </div>
        </div>

        <!-- Decorative background elements -->
        <div class="bg-orb orb-1"></div>
        <div class="bg-orb orb-2"></div>
        <div class="bg-orb orb-3"></div>

        <!-- Header Section -->
        <div class="popup-header">
            <div class="logo-wrapper">
                <div class="logo"></div>
                <div class="logo-glow"></div>
            </div>
            <div class="header-text">
                <h1 class="title">Grabbit</h1>
                <span class="tagline">Link Manager</span>
            </div>
        </div>

        <!-- Actions Section -->
        <div class="actions-section" id="actionsSection">
            <!-- Buttons will be dynamically rendered via JS -->
        </div>

        <!-- Footer Section -->
        <div class="popup-footer">
            <a href="/options.html" class="footer-link" target="_blank">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path
                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                    </path>
                </svg>
                <span>Settings</span>
            </a>
            <div class="footer-divider"></div>
            <a href="/popup/popupOptions/popupOptions.html" class="footer-link customize-popup-link" target="_blank">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1L9 6l5-5 5 5-3-5M12 23l-3-5 5-5 5 5-3-5" />
                </svg>
                <span>Customize</span>
            </a>
            <div class="footer-divider"></div>
            <a id="version-link" class="version-badge" title="View changelog">
                <span class="version-text"></span>
                <span class="update-dot" style="display: none;"></span>
            </a>
        </div>
    </div>
    <script src="popup.js"></script>

    <!-- AI Comparison Modal Structure -->
    <div id="compare-modal" class="compare-modal" style="display: none;">
        <div class="compare-overlay"></div>
        <div class="compare-content">
            <div class="compare-header">
                <div class="compare-title">
                    <div class="ai-icon-container">
                        <svg class="ai-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z" />
                            <path d="M2 17l10 5 10-5" />
                            <path d="M2 12l10 5 10-5" />
                        </svg>
                        <div class="ai-glow"></div>
                    </div>
                    <h2>AI Comparison Dashboard</h2>
                </div>
                <button id="close-compare" class="compare-close" aria-label="Close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <div class="compare-body">
                <div id="compare-loading" class="compare-state">
                    <div class="loading-animation">
                        <div class="pulse-ring"></div>
                        <div class="ai-loader-icon">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M12 2L2 7l10 5 10-5-10-5z" />
                                <path d="M2 17l10 5 10-5" />
                                <path d="M2 12l10 5 10-5" />
                            </svg>
                        </div>
                    </div>
                    <h3>Analyzing Products...</h3>
                    <p>Scanning features, prices, and reviews...</p>
                    <div class="loading-steps">
                        <div class="step active" id="step-extract">Extracting web data...</div>
                        <div class="step" id="step-analyze">Analyzing with AI...</div>
                        <div class="step" id="step-render">Building dashboard...</div>
                    </div>
                </div>

                <div id="compare-error" class="compare-state" style="display: none;">
                    <div class="error-icon">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="12"></line>
                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                        </svg>
                    </div>
                    <h3>Analysis Failed</h3>
                    <p id="error-text">We couldn't reach the AI server. Please check your internet connection or API
                        key.</p>
                    <button class="retry-btn">Try Again</button>
                </div>

                <div id="compare-results" class="compare-state" style="display: none;">
                    <div class="results-grid">
                        <div class="results-main">
                            <div class="verdict-card">
                                <div class="verdict-header">
                                    <span class="badge purple">üèÜ Top Choice</span>
                                    <h3 id="winner-name">Product Name</h3>
                                </div>
                                <p id="winner-reason">Connecting the dots...</p>
                                <div class="verdict-stats">
                                    <div class="stat">
                                        <span class="stat-label">AI Score</span>
                                        <span class="stat-value" id="winner-score">9.5</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-label">Price</span>
                                        <span class="stat-value" id="winner-price">$ --</span>
                                    </div>
                                </div>
                            </div>

                            <div class="details-section">
                                <h4>Comparison Table</h4>
                                <div class="table-frame">
                                    <table id="comparison-table">
                                        <thead>
                                            <tr id="table-head">
                                                <th>Feature</th>
                                            </tr>
                                        </thead>
                                        <tbody id="table-body"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="results-sidebar">
                            <h4>Product Breakdown</h4>
                            <div id="product-list" class="product-list"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="compare-footer">
                <p></p>
                <div class="footer-actions">
                    <button id="copy-summary" class="footer-btn">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copy Results
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>